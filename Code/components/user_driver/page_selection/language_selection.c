/*
 * page_selection.c
 *
 *  Created on: Jan 9, 2021
 *      Author: ductu
 */
/***********************************************************************************************************************
 * Pragma directive
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Includes <System Includes>
 ***********************************************************************************************************************/
#include "language_selection.h"
#include "../../Common.h"
/***********************************************************************************************************************
 * Macro definitions
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Typedef definitions
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Private global variables and functions
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Exported global variables and functions (to be accessed by other files)
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Imported global variables and functions (from other files)
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * Function Name: language_gpio_init
 * Description  : initialize GPIO input for language, mode and page
 * Arguments    : none
 * Return Value : none
 ***********************************************************************************************************************/
void language_gpio_init(void)
{
    gpio_config_t io_conf;

    // interrupt of rising edge
    io_conf.intr_type = GPIO_PIN_INTR_DISABLE;
    // bit mask of the pins, use GPIO0 here
    io_conf.pin_bit_mask = GPIO_INPUT_LANGUAGE_PIN_SEL;
    // set as input mode
    io_conf.mode = GPIO_MODE_INPUT;
    // enable pull-up mode
    io_conf.pull_up_en = 1;
    esp_err_t error = gpio_config(&io_conf); // configure GPIO with the given settings

    if (error != ESP_OK)
    {
        APP_LOGE("error configuring inputs\n");
    }
}

/***********************************************************************************************************************
 * Function Name: e_MODE_SELECTOR get_current_languge(void)
 * Description  : get current language
 * Arguments    : none
 * Return Value : e_LANGUAGE_SELECTOR
 ***********************************************************************************************************************/
e_LANGUAGE_SELECTOR get_current_languge(void)
{
    e_LANGUAGE_SELECTOR _language = kLANGUAGE_1;
    if (gpio_get_level(GPIO_USER_LANGUGE_1) == 1)
    {
        _language = kLANGUAGE_1;
    }
    else
    {
        _language = kLANGUAGE_2;
    }
    return _language;
}

/***********************************************************************************************************************
 * Static Functions
 ***********************************************************************************************************************/

/***********************************************************************************************************************
 * End of file
 ***********************************************************************************************************************/
